<Window x:Class="WordLearningApp.UI.StatisticsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Статистика" Height="850" Width="900" 
        WindowStartupLocation="CenterScreen">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" Text="Статистика изучения" FontSize="24" FontWeight="Bold" 
                       HorizontalAlignment="Center" Margin="0,0,0,20"/>

            
            <Grid Grid.Row="1" Margin="0,0,0,20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0" x:Name="StatsTotalWords" Text="Всего слов: 0" FontSize="18" Margin="0,0,0,10"/>
                <TextBlock Grid.Row="1" x:Name="StatsLearnedWords" Text="Изучено: 0" FontSize="18" Margin="0,0,0,10"/>
                <TextBlock Grid.Row="2" x:Name="StatsProgress" Text="Прогресс: 0%" FontSize="18" Margin="0,0,0,20"/>
            </Grid>

            <TextBlock Grid.Row="2" Text="Прогресс по категориям" FontSize="20" FontWeight="Bold" 
                       HorizontalAlignment="Center" Margin="0,0,0,10"/>

            <DataGrid Grid.Row="3" x:Name="CategoriesStatsGrid" 
                      AutoGenerateColumns="False" CanUserAddRows="False" Height="200">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Категория" Binding="{Binding CategoryName}" Width="200"/>
                    <DataGridTextColumn Header="Всего слов" Binding="{Binding TotalWords}" Width="100"/>
                    <DataGridTextColumn Header="Изучено" Binding="{Binding LearnedWords}" Width="100"/>
                    <DataGridTextColumn Header="Прогресс" Binding="{Binding Progress, StringFormat={}{0}%}" Width="100"/>
                </DataGrid.Columns>

                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                        <Setter Property="Background" Value="White"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Progress}" Value="100">
                                <Setter Property="Background" Value="#90EE90"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding LearnedWords}" Value="0">
                                <Setter Property="Background" Value="#FFB6C1"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.RowStyle>
            </DataGrid>

            <TextBlock Grid.Row="4" Text="История тестов" FontSize="20" FontWeight="Bold" 
                       HorizontalAlignment="Center" Margin="0,20,0,10"/>

            <DataGrid Grid.Row="5" x:Name="TestsHistoryGrid" 
                      AutoGenerateColumns="False" CanUserAddRows="False" Height="200">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Дата" Binding="{Binding TestDate, StringFormat=dd.MM.yyyy HH:mm}" Width="120"/>
                    <DataGridTextColumn Header="Категория" Binding="{Binding CategoryName}" Width="150"/>
                    <DataGridTextColumn Header="Результат" Width="100">
                        <DataGridTextColumn.Binding>
                            <MultiBinding StringFormat="{}{0}/{1}">
                                <Binding Path="CorrectAnswers"/>
                                <Binding Path="TotalQuestions"/>
                            </MultiBinding>
                        </DataGridTextColumn.Binding>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="%" Binding="{Binding Percentage, StringFormat={}{0}%}" Width="60"/>
                    <DataGridTextColumn Header="Оценка" Width="100">
                        <DataGridTextColumn.Binding>
                            <Binding Path="Percentage"/>
                        </DataGridTextColumn.Binding>
                    </DataGridTextColumn>
                </DataGrid.Columns>
            </DataGrid>

            <Button Grid.Row="6" x:Name="BtnResetProgress" Content="Сбросить прогресс" Width="200" Height="40" FontSize="16" 
                    Click="BtnResetProgress_Click" Background="Orange" Foreground="White" Margin="0,20,0,0"/>
        </Grid>
    </ScrollViewer>
</Window>