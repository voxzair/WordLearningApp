ТЕХНИЧЕСКОЕ ЗАДАНИЕ
на разработку программного модуля курсового проекта
Студент: Арановский Матвей Михайлович
Группа: 2307В1
1. Описание проекта
1.1 Название системы
WordLearningApp – десктопное приложение для изучения иностранных слов с системой платной подписки
1.2 Назначение
Приложение предназначено для эффективного изучения и запоминания иностранных слов. Система позволяет пользователям изучать слова по категориям, проходить тесты для закрепления материала, отслеживать прогресс обучения через детальную статистику. Расширенные функции (управление словарем, создание категорий) доступны после оплаты подписки.
2. Функциональные требования
2.1 Основные функции системы
Функция 1: Регистрация прогресса изучения слов

    Описание: Пользователь просматривает список слов в категории, отмечает слова как изученные. Система автоматически сохраняет прогресс в базу данных, обновляет счетчик повторений и дату последнего просмотра.
    Входные данные: Идентификатор слова, флаг изученности
    Результат: Запись в таблице UserProgress с обновленными данными

Функция 2: Прохождение тестов по изученным словам

    Описание: Система генерирует тест из 5 вопросов с 4 вариантами ответа на основе слов, которые пользователь ранее отметил как изученные. После ответа показывается правильный вариант. В конце теста отображается результат в процентах.
    Входные данные: Список идентификаторов изученных слов
    Результат: Сохранение результата теста в таблицу TestResults, отображение статистики правильных/неправильных ответов

Функция 3: Управление словарем (премиум-функция)

    Описание: Добавление новых слов в базу данных с указанием иностранного слова, перевода и категории. Редактирование существующих слов (изменение перевода, перенос в другую категорию). Удаление слов из базы данных.
    Входные данные: Иностранное слово, перевод, идентификатор категории
    Функция доступна только при активной подписке
    Результат: Изменения в таблице Words, сохранение истории изменений

Функция 4: Управление категориями (премиум-функция)

    Описание: Создание новых категорий для группировки слов. Изменение названия и описания существующих категорий. Удаление категорий (вместе со всеми словами в ней или с переносом слов в другую категорию).
    Входные данные: Название категории, описание (опционально)
    Функция доступна только при активной подписке
    Результат: Изменения в таблице Categories

Функция 5: Отображение статистики обучения

    Описание: Визуализация прогресса изучения в виде таблицы категорий с цветовой индикацией (зеленый – 100% изучено, красный – 0%). Отображение общего количества слов, количества изученных слов и процента прогресса. Показ истории последних 50 тестов с датой, результатом и оценкой.
    Входные данные: Данные из таблиц UserProgress, TestResults
    Результат: Таблицы с актуальной статистикой в интерфейсе StatisticsWindow

Функция 6: Оплата подписки

    Описание: Пользователь выбирает тариф (месячный – 299 руб., годовой – 2990 руб.), вводит данные банковской карты (номер, срок действия, CVV). Система проверяет корректность введенных данных, создает запись о платеже и продлевает/создает подписку. При наличии активной подписки происходит автоматическое продление срока действия.
    Входные данные: Тип тарифа, номер карты, срок действия, CVV
    Результат: Запись в таблицах Payments и Subscriptions, обновление статуса подписки в интерфейсе

Функция 7: Отмена подписки

    Описание: Пользователь может отменить активную подписку. Система удаляет запись о подписке из базы данных, блокирует доступ к премиум-функциям и обновляет интерфейс.
    Входные данные: Подтверждение действия пользователя
    Результат: Удаление записи из таблицы Subscriptions, обновление состояния UI

3. Структура базы данных
Таблица 1: Words (Слова)
Описание: Хранит информацию об иностранных словах и их переводах
Table
Copy
Поле	Тип данных	Ограничения	Описание
Id	int	PK, Identity	Уникальный идентификатор слова
ForeignWord	nvarchar(100)	NOT NULL	Слово на иностранном языке
Translation	nvarchar(100)	NOT NULL	Перевод слова
CategoryId	int	FK → Categories.Id	Ссылка на категорию
Связи:

    Один ко многим с таблицей Categories (одна категория содержит много слов)
    Многие ко многим с таблицей UserProgress (одно слово может изучаться многими пользователями)

Таблица 2: Categories (Категории)
Описание: Тематические группы для слов
Table
Copy
Поле	Тип данных	Ограничения	Описание
Id	int	PK, Identity	Уникальный идентификатор категории
Name	nvarchar(50)	NOT NULL, Unique	Название категории
Description	nvarchar(200)	NULL	Описание категории (опционально)
Связи:

    Один ко многим с таблицей Words

Таблица 3: UserProgress (Прогресс изучения)
Описание: Отслеживает прогресс пользователя по каждому слову
Table
Copy
Поле	Тип данных	Ограничения	Описание
Id	int	PK, Identity	Уникальный идентификатор записи прогресса
WordId	int	FK → Words.Id, Unique	Ссылка на изучаемое слово
IsLearned	bit	NOT NULL, Default 0	Флаг изученности слова
ReviewCount	int	NOT NULL, Default 0	Количество повторений слова
LastReviewed	datetime2	NULL	Дата последнего просмотра/повторения
Связи:

    Один к одному с таблицей Words (одна запись прогресса на одно слово)

Таблица 4: Subscriptions (Подписки)
Описание: Хранит информацию о платных подписках пользователя
Table
Copy
Поле	Тип данных	Ограничения	Описание
Id	int	PK, Identity	Уникальный идентификатор подписки
StartDate	date	NOT NULL	Дата начала действия подписки
EndDate	date	NOT NULL	Дата окончания действия подписки
Type	nvarchar(10)	NOT NULL	Тип подписки (Month/Year)
Таблица 5: Payments (Платежи)
Описание: История платежей за подписки
Table
Copy
Поле	Тип данных	Ограничения	Описание
Id	int	PK, Identity	Уникальный идентификатор платежа
Amount	decimal(10,2)	NOT NULL	Сумма платежа в рублях
PaymentDate	datetime2	NOT NULL	Дата и время платежа
Status	nvarchar(20)	NOT NULL	Статус платежа (Success/Failed)
Связи:

    Один ко многим с таблицей Subscriptions (множество платежей для одной подписки)

Таблица 6: TestResults (Результаты тестов)
Описание: Хранит историю прохождения тестов
Table
Copy
Поле	Тип данных	Ограничения	Описание
Id	int	PK, Identity	Уникальный идентификатор результата теста
TestDate	datetime2	NOT NULL	Дата и время прохождения теста
CorrectAnswers	int	NOT NULL	Количество правильных ответов
TotalQuestions	int	NOT NULL	Общее количество вопросов в тесте
Percentage	float	NOT NULL	Процент правильных ответов (0-100)
CategoryName	nvarchar(50)	NULL	Название категории или "Изученные слова"
ERD-диаграмма:
Copy

┌─────────────────┐        ┌─────────────────┐
│   Categories    │        │   Subscriptions │
│-----------------│        │-----------------│
│ PK Id           │        │ PK Id           │
│     Name        │        │     StartDate   │
│     Description │        │     EndDate     │
└─────────┬───────┘        │     Type        │
          │                └─────────┬───────┘
          │                          │
┌─────────▼───────┐        ┌─────────▼───────┐
│     Words       │        │    Payments     │
│-----------------│        │-----------------│
│ PK Id           │        │ PK Id           │
│ FK CategoryId   │        │     Amount      │
│     ForeignWord │        │     PaymentDate │
│     Translation │        │     Status      │
└─────────┬───────┘        └─────────────────┘
          │
┌─────────▼──────────┐     ┌─────────────────┐
│   UserProgress     │◄────►│  TestResults    │
│--------------------│     │-----------------│
│ PK Id              │     │ PK Id           │
│ FK WordId (Unique) │     │     TestDate    │
│     IsLearned      │     │     CorrectAnswers
│     ReviewCount    │     │     TotalQuestions
│     LastReviewed   │     │     Percentage  │
└────────────────────┘     │     CategoryName│
                           └─────────────────┘

4. Основные формы приложения
Форма 1: MainWindow (Главное окно)
Назначение: Центральная точка входа в приложение, отображение статуса подписки и навигация по функциям
Элементы управления:

    TextBlock (SubscriptionStatus) — отображение статуса подписки и даты окончания
    Button (BtnTestLearnedWords) — переход к тесту по изученным словам
    Button (BtnStudyByCategory) — переход к изучению по категориям
    Button (BtnStatistics) — открытие окна статистики
    Button (BtnWordsList) — открытие управления словами (требует подписки)
    Button (BtnCategories) — открытие управления категориями (требует подписки)
    Button (BtnSubscribe) — переход к оплате подписки
    Button (BtnUnsubscribe) — отмена активной подписки

Действия:

    Загрузка приложения → проверка активной подписки в БД
    Нажатие кнопки оплаты → открытие PaymentWindow
    Нажатие кнопки теста → проверка наличия изученных слов → открытие CategoryTestWindow
    Нажатие кнопки статистики → открытие StatisticsWindow

Форма 2: StudyWindow (Окно изучения слов)
Назначение: Отображение слов для последовательного изучения
Элементы управления:

    TextBlock — отображение иностранного слва
    TextBlock — отображение перевода
    Button "Изучено" — отметка слова как изученного (создает запись в UserProgress)
    Button "Следующее слово" — переход к следующему слову в категории
    Button "Закрыть" — возврат в главное окно

Действия:

    При открытии загружает слова из выбранной категории или все слова
    При нажатии "Изучено" создает/обновляет запись в UserProgress

Форма 3: CategoryTestWindow (Окно тестирования)
Назначение: Проведение теста по изученным словам с вариантами ответов
Элементы управления:

    TextBlock (WordToTranslateText) — слово для перевода
    UniformGrid (AnswersPanel) с 4 кнопками — варианты ответа
    TextBlock (CurrentQuestionText) — номер текущего вопроса
    TextBlock (TotalQuestionsText) — общее количество вопросов
    DispatcherTimer — автоматический переход к следующему вопросу через 2 секунды

Действия:

    При открытии загружает изученные слова, перемешивает их
    Генерирует 3 ложных варианта ответа из других слов той же категории
    При выборе ответа подсвечивает правильный (зеленый) и неправильный (красный)
    После 5 вопросов сохраняет результат в TestResults и показывает итоговую статистику

Форма 4: StatisticsWindow (Окно статистики)
Назначение: Визуализация прогресса обучения и истории тестов
Элементы управления:

    TextBlock (StatsTotalWords) — общее количество слов в системе
    TextBlock (StatsLearnedWords) — количество изученных слов
    TextBlock (StatsProgress) — процент изученных слов
    DataGrid (CategoriesStatsGrid) — таблица категорий с цветовой индикацией прогресса
    DataGrid (TestsHistoryGrid) — история последних тестов с датой, результатом и оценкой
    Button (BtnResetProgress) — сброс всего прогресса и истории тестов

Действия:

    При открытии загружает данные из БД и отображает в таблицах
    При нажатии "Сбросить прогресс" удаляет все записи из UserProgress и TestResults

Форма 5: WordsListWindow (Окно управления словами) – премиум
Назначение: Полный CRUD-функционал для управления словарем
Элементы управления:

    DataGrid — список всех слов с колонками "Слово", "Перевод", "Категория"
    TextBox — поиск по словам
    Button "Добавить" — открытие диалога создания нового слова
    Button "Редактировать" — открытие диалога редактирования выбранного слова
    Button "Удалить" — удаление выбранного слова с подтверждением

Действия:

    Доступно только при активной подписке
    При открытии проверяет HasActiveSubscription()
    Любые изменения сохраняются в базу данных через Entity Framework

Форма 6: CategoriesWindow (Окно управления категориями) – премиум
Назначение: Управление категориями слов
Элементы управления:

    DataGrid — список категорий с количеством слов в каждой
    Button "Добавить категорию" — открытие диалога создания
    Button "Редактировать" — изменение названия и описания
    Button "Удалить" — удаление категории (со всеми словами или с переносом)

Действия:

    Доступно только при активной подписке
    При удалении категории показывается предупреждение о количестве удаляемых слов

Форма 7: PaymentWindow (Окно оплаты)
Назначение: Процедура оплаты подписки
Элементы управления:

    ComboBox (TariffComboBox) — выбор тарифа (месячный/годовой)
    TextBox (CardNumberTextBox) — ввод номера карты (16 цифр, авто-форматирование с пробелами)
    TextBox (ExpiryDateTextBox) — ввод срока действия (MM/YY)
    TextBox (CvvTextBox) — ввод CVV-кода (3 цифры)
    TextBlock (ErrorTextBlock) — отображение ошибок валидации
    Button "Оплатить" — обработка платежа
    Button "Отмена" — отмена операции

Действия:

    При нажатии "Оплатить" проверяется корректность введенных данных
    При успехе создается Payment и Subscription, возвращается DialogResult = true
    При ошибке показывается сообщение в ErrorTextBlock

5. Схема переходов между формами
Текстовое описание навигации
При запуске приложения
Запуск → MainWindow (главное окно с навигацией)
Из MainWindow

    Кнопка "Пройти тест по изученным словам"
        Проверка: есть ли слова с ReviewCount > 0 или IsLearned = true
        Если есть → CategoryTestWindow (режим изученных слов)
        Если нет → MessageBox "Вы ещё не изучили ни одного слова"
    Кнопка "Изучить по категории"
        → CategorySelectionWindow (выбор из списка категорий)
        При выборе → CategoryStudyWindow (изучение слов выбранной категории)
    Кнопка "Статистика"
        → StatisticsWindow (модальное окно с прогрессом и историей)
    Кнопка "Начать изучение (все слова)"
        → StudyWindow (последовательное изучение всех слов)
    Кнопка "Слова" (премиум)
        Проверка: HasActiveSubscription()
        Если true → WordsListWindow (список слов с CRUD)
        Если false → MessageBox "Нужна подписка"
    Кнопка "Категории" (премиум)
        Проверка: HasActiveSubscription()
        Если true → CategoriesWindow (список категорий)
        Если false → MessageBox "Нужна подписка"
    Кнопка "Оплата подписки"
        → PaymentWindow (модальное окно оплаты)
        При успехе → MessageBox "Подписка оплачена" → обновление статуса в MainWindow
    Кнопка "Отменить подписку" (доступна если подписка активна)
        MessageBox "Уверены?" → при подтверждении удаляет активную подписку → обновление UI

Из StudyWindow и CategoryStudyWindow

    Кнопка "Изучено" → создает/обновляет UserProgress → переход к следующему слову
    Кнопка "Закрыть" → возврат в MainWindow

Из CategoryTestWindow

    Выбор ответа → подсветка правильного/неправильного → автоматический переход через 2 сек
    Последний вопрос → сохранение результата в TestResults → MessageBox "Тест завершен" → возврат в MainWindow

Из StatisticsWindow

    Кнопка "Сбросить прогресс" → MessageBox "Точно?" → при подтверждении удаляет UserProgress и TestResults → обновляет все таблицы
    Кнопка "Закрыть" → возврат в MainWindow

Из WordsListWindow и CategoriesWindow

    Кнопка "Добавить" → открывает диалог создания → при сохранении добавляет в базу → обновляет DataGrid
    Кнопка "Редактировать" → открывает диалог редактирования → при сохранении обновляет в базе → обновляет DataGrid
    Кнопка "Удалить" → MessageBox "Удалить?" → при подтверждении удаляет из базы → обновляет DataGrid
    Кнопка "Закрыть" → возврат в MainWindow

Из PaymentWindow

    Кнопка "Оплатить" → проверка данных → создание Payment и Subscription → DialogResult = true → закрытие окна
    Кнопка "Отмена" → DialogResult = false → возврат в MainWindow без изменений
